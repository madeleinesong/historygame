"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/intervene/route";
exports.ids = ["app/api/intervene/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "node:fs/promises":
/*!***********************************!*\
  !*** external "node:fs/promises" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("node:fs/promises");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fintervene%2Froute&page=%2Fapi%2Fintervene%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fintervene%2Froute.ts&appDir=%2FUsers%2Fmadeleinesong%2Fhistorygame%2Fwar-games-mvp%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmadeleinesong%2Fhistorygame%2Fwar-games-mvp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fintervene%2Froute&page=%2Fapi%2Fintervene%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fintervene%2Froute.ts&appDir=%2FUsers%2Fmadeleinesong%2Fhistorygame%2Fwar-games-mvp%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmadeleinesong%2Fhistorygame%2Fwar-games-mvp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_madeleinesong_historygame_war_games_mvp_app_api_intervene_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/intervene/route.ts */ \"(rsc)/./app/api/intervene/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/intervene/route\",\n        pathname: \"/api/intervene\",\n        filename: \"route\",\n        bundlePath: \"app/api/intervene/route\"\n    },\n    resolvedPagePath: \"/Users/madeleinesong/historygame/war-games-mvp/app/api/intervene/route.ts\",\n    nextConfigOutput,\n    userland: _Users_madeleinesong_historygame_war_games_mvp_app_api_intervene_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/intervene/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZpbnRlcnZlbmUlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmludGVydmVuZSUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmludGVydmVuZSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRm1hZGVsZWluZXNvbmclMkZoaXN0b3J5Z2FtZSUyRndhci1nYW1lcy1tdnAlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGbWFkZWxlaW5lc29uZyUyRmhpc3RvcnlnYW1lJTJGd2FyLWdhbWVzLW12cCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDeUI7QUFDdEc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93YXItZ2FtZXMtbXZwLz9jYWI4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9tYWRlbGVpbmVzb25nL2hpc3RvcnlnYW1lL3dhci1nYW1lcy1tdnAvYXBwL2FwaS9pbnRlcnZlbmUvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2ludGVydmVuZS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2ludGVydmVuZVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvaW50ZXJ2ZW5lL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL21hZGVsZWluZXNvbmcvaGlzdG9yeWdhbWUvd2FyLWdhbWVzLW12cC9hcHAvYXBpL2ludGVydmVuZS9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvaW50ZXJ2ZW5lL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fintervene%2Froute&page=%2Fapi%2Fintervene%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fintervene%2Froute.ts&appDir=%2FUsers%2Fmadeleinesong%2Fhistorygame%2Fwar-games-mvp%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmadeleinesong%2Fhistorygame%2Fwar-games-mvp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/intervene/route.ts":
/*!************************************!*\
  !*** ./app/api/intervene/route.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var _server_propagate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/server/propagate */ \"(rsc)/./src/server/propagate.ts\");\n\nasync function POST(req) {\n    const { id, edited } = await req.json();\n    const world = await (0,_server_propagate__WEBPACK_IMPORTED_MODULE_0__.loadWorld)();\n    const updated = await (0,_server_propagate__WEBPACK_IMPORTED_MODULE_0__.runIntervention)(world, id, edited);\n    return new Response(JSON.stringify(updated), {\n        headers: {\n            \"Content-Type\": \"application/json\"\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2ludGVydmVuZS9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUNnRTtBQUd6RCxlQUFlRSxLQUFLQyxHQUFnQjtJQUN6QyxNQUFNLEVBQUVDLEVBQUUsRUFBRUMsTUFBTSxFQUFFLEdBQUcsTUFBTUYsSUFBSUcsSUFBSTtJQUNyQyxNQUFNQyxRQUFlLE1BQU1QLDREQUFTQTtJQUNwQyxNQUFNUSxVQUFVLE1BQU1QLGtFQUFlQSxDQUFDTSxPQUFPSCxJQUFJQztJQUNqRCxPQUFPLElBQUlJLFNBQVNDLEtBQUtDLFNBQVMsQ0FBQ0gsVUFBVTtRQUFFSSxTQUFTO1lBQUUsZ0JBQWdCO1FBQW1CO0lBQUU7QUFDakciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93YXItZ2FtZXMtbXZwLy4vYXBwL2FwaS9pbnRlcnZlbmUvcm91dGUudHM/YzhhMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xuaW1wb3J0IHsgbG9hZFdvcmxkLCBydW5JbnRlcnZlbnRpb24gfSBmcm9tIFwiQC9zZXJ2ZXIvcHJvcGFnYXRlXCI7XG5pbXBvcnQgdHlwZSB7IFdvcmxkIH0gZnJvbSBcIkAvdHlwZXMvZXZlbnRcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBOZXh0UmVxdWVzdCl7XG4gIGNvbnN0IHsgaWQsIGVkaXRlZCB9ID0gYXdhaXQgcmVxLmpzb24oKTtcbiAgY29uc3Qgd29ybGQ6IFdvcmxkID0gYXdhaXQgbG9hZFdvcmxkKCk7XG4gIGNvbnN0IHVwZGF0ZWQgPSBhd2FpdCBydW5JbnRlcnZlbnRpb24od29ybGQsIGlkLCBlZGl0ZWQpO1xuICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHVwZGF0ZWQpLCB7IGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSB9KTtcbn0iXSwibmFtZXMiOlsibG9hZFdvcmxkIiwicnVuSW50ZXJ2ZW50aW9uIiwiUE9TVCIsInJlcSIsImlkIiwiZWRpdGVkIiwianNvbiIsIndvcmxkIiwidXBkYXRlZCIsIlJlc3BvbnNlIiwiSlNPTiIsInN0cmluZ2lmeSIsImhlYWRlcnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/intervene/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/server/propagate.ts":
/*!*********************************!*\
  !*** ./src/server/propagate.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   loadWorld: () => (/* binding */ loadWorld),\n/* harmony export */   mapTextToDeltas: () => (/* binding */ mapTextToDeltas),\n/* harmony export */   propagate: () => (/* binding */ propagate),\n/* harmony export */   runIntervention: () => (/* binding */ runIntervention)\n/* harmony export */ });\n/* harmony import */ var node_fs_promises__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:fs/promises */ \"node:fs/promises\");\n/* harmony import */ var node_fs_promises__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(node_fs_promises__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node:path */ \"node:path\");\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(node_path__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst LAMBDA = 0.25;\nfunction clamp01(x) {\n    return Math.max(0, Math.min(1, x));\n}\nfunction clampState(s) {\n    const out = {\n        ...s\n    };\n    const keys = [\n        \"war_escalation\",\n        \"mobilization_level\",\n        \"political_stability\",\n        \"intel_leak_risk\",\n        \"logistics_capacity\",\n        \"alliances_cohesion\",\n        \"public_support\"\n    ];\n    for (const k of keys){\n        if (out[k] !== undefined) out[k] = clamp01(out[k]);\n    }\n    if (typeof out.casualties_expected === \"number\") {\n        out.casualties_expected = Math.max(0, Math.round(out.casualties_expected));\n    }\n    return out;\n}\nfunction addStates(a, b) {\n    const out = {\n        ...a\n    };\n    for (const k of Object.keys(b)){\n        const va = out[k] ?? 0;\n        const vb = b[k] ?? 0;\n        out[k] = k === \"casualties_expected\" ? Math.round(va + vb) : va + vb;\n    }\n    return out;\n}\nfunction timeDecay(years) {\n    return Math.exp(-LAMBDA * years);\n}\nfunction mechanismFilter(mech, delta) {\n    const scale = {\n        informational: {\n            public_support: 1.0,\n            war_escalation: 0.4,\n            political_stability: 0.3\n        },\n        diplomatic: {\n            alliances_cohesion: 1.0,\n            political_stability: 0.6,\n            war_escalation: 0.2\n        },\n        military: {\n            mobilization_level: 1.0,\n            casualties_expected: 1.0,\n            war_escalation: 0.7,\n            logistics_capacity: 0.3\n        },\n        economic: {\n            logistics_capacity: 1.0,\n            public_support: 0.3,\n            political_stability: 0.2\n        },\n        technological: {\n            logistics_capacity: 0.8\n        }\n    };\n    const out = {};\n    for (const [k, v] of Object.entries(delta)){\n        const s = scale[mech]?.[k] ?? 0.2;\n        out[k] = v * s;\n    }\n    return out;\n}\nfunction yearsBetween(a, b) {\n    const da = new Date(a), db = new Date(b);\n    return Math.max(0, (db.getTime() - da.getTime()) / (1000 * 60 * 60 * 24 * 365));\n}\nfunction topologicalOrder(world) {\n    // Sort by date ascending; edges violating time are ignored in propagation anyway\n    return Object.values(world.nodes).sort((a, b)=>a.date.localeCompare(b.date)).map((n)=>n.id);\n}\nasync function loadWorld() {\n    const p = node_path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), \"data\", \"wwi.json\");\n    const raw = await node_fs_promises__WEBPACK_IMPORTED_MODULE_0___default().readFile(p, \"utf-8\");\n    const world = JSON.parse(raw);\n    return world;\n}\nfunction applyDelta(nodeState, delta) {\n    const merged = addStates(nodeState, delta);\n    return clampState(merged);\n}\n// very small heuristic: map headline word-changes to deltas\nfunction mapTextToDeltas(original, edited) {\n    const text = edited.toLowerCase();\n    const d = {\n        casualties_expected: 0\n    };\n    function inc(key, amt) {\n        d[key] = (d[key] ?? 0) + amt;\n    }\n    // heuristic keywords\n    const lowers = [\n        [\n            \"assassinated\",\n            \"assassin\",\n            \"kill\",\n            \"massacre\",\n            \"slaughter\",\n            \"offensive\",\n            \"invasion\",\n            \"attack\",\n            \"u-boat\",\n            \"gas\",\n            \"mobilize\",\n            \"declare war\"\n        ],\n        [\n            \"ceasefire\",\n            \"armistice\",\n            \"truce\",\n            \"peace\",\n            \"survives\",\n            \"foiled\",\n            \"fails\",\n            \"withdraw\",\n            \"retreat\",\n            \"neutral\",\n            \"talks\",\n            \"negotiat\"\n        ]\n    ];\n    for (const k of [\n        \"assassinated\",\n        \"assassin\",\n        \"kill\",\n        \"massacre\",\n        \"offensive\",\n        \"invasion\",\n        \"attack\",\n        \"u-boat\",\n        \"gas\",\n        \"mobilize\",\n        \"declare war\"\n    ]){\n        if (text.includes(k)) {\n            inc(\"war_escalation\", 0.25);\n            inc(\"mobilization_level\", 0.2);\n            d.casualties_expected += 10000;\n        }\n    }\n    for (const k of [\n        \"ceasefire\",\n        \"armistice\",\n        \"truce\",\n        \"peace\",\n        \"survives\",\n        \"foiled\",\n        \"fails\",\n        \"withdraw\",\n        \"retreat\",\n        \"neutral\",\n        \"talks\",\n        \"negotiat\"\n    ]){\n        if (text.includes(k)) {\n            inc(\"war_escalation\", -0.35);\n            inc(\"political_stability\", 0.2);\n            d.casualties_expected -= 8000;\n        }\n    }\n    if (text.includes(\"telegram\") || text.includes(\"intercept\") || text.includes(\"propaganda\")) {\n        inc(\"intel_leak_risk\", 0.3);\n        inc(\"public_support\", 0.15);\n    }\n    if (text.includes(\"blockade\") || text.includes(\"supply\")) {\n        inc(\"logistics_capacity\", -0.2);\n    }\n    if (text.includes(\"alliance\") || text.includes(\"joins\")) {\n        inc(\"alliances_cohesion\", 0.2);\n    }\n    // clamp casualties effect\n    d.casualties_expected = Math.max(-50000, Math.min(50000, d.casualties_expected || 0));\n    return d;\n}\nfunction propagate(world, sourceId, deltas) {\n    const out = JSON.parse(JSON.stringify(world)); // deep clone\n    const acc = {\n        [sourceId]: deltas\n    };\n    const order = topologicalOrder(out);\n    const idx = {};\n    order.forEach((id, i)=>{\n        idx[id] = i;\n    });\n    // Ensure edges respect time direction in effect\n    const edges = out.edges.filter((e)=>idx[e.src] <= idx[e.dst]);\n    for (const id of order){\n        const localDelta = acc[id];\n        if (localDelta) {\n            // apply to node\n            out.nodes[id].state = applyDelta(out.nodes[id].state || {}, localDelta);\n            // push to neighbors\n            const outs = edges.filter((e)=>e.src === id);\n            for (const e of outs){\n                const years = yearsBetween(out.nodes[e.src].date, out.nodes[e.dst].date);\n                const base = mechanismFilter(e.mechanism, localDelta);\n                for (const [k, v] of Object.entries(base)){\n                    const d = v * e.weight * timeDecay(years);\n                    acc[e.dst] = acc[e.dst] || {};\n                    acc[e.dst][k] = (acc[e.dst][k] ?? 0) + d;\n                }\n            }\n        }\n    }\n    return out;\n}\nasync function runIntervention(world, id, edited) {\n    const original = world.nodes[id]?.title || \"\";\n    const deltas = mapTextToDeltas(original, edited);\n    const updated = propagate(world, id, deltas);\n    // very light headline rewrite: append trend hint if large shift at the source node\n    const src = updated.nodes[id];\n    const w = (src.state.war_escalation ?? 0) - (world.nodes[id].state.war_escalation ?? 0);\n    if (Math.abs(w) > 0.2) {\n        const tag = w < 0 ? \" (tensions ease)\" : \" (tensions rise)\";\n        updated.nodes[id].title = edited.endsWith(tag) ? edited : edited + tag;\n    } else {\n        updated.nodes[id].title = edited;\n    }\n    return updated;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RSxFQUFFRSxHQUFHLENBQUMsQ0FBU2pGLEVBQUUsSUFBSSxLQUFLOEQ7Z0JBQzNEO1lBQ0Y7UUFDRjtJQUNGO0lBQ0EsT0FBT2hFO0FBQ1Q7QUFFTyxlQUFlMEYsZ0JBQWdCcEQsS0FBWSxFQUFFUSxFQUFVLEVBQUVlLE1BQWM7SUFDNUUsTUFBTUQsV0FBV3RCLE1BQU1FLEtBQUssQ0FBQ00sR0FBRyxFQUFFNkMsU0FBUztJQUMzQyxNQUFNbkIsU0FBU2IsZ0JBQWdCQyxVQUFVQztJQUN6QyxNQUFNK0IsVUFBVXRCLFVBQVVoQyxPQUFPUSxJQUFJMEI7SUFFckMsbUZBQW1GO0lBQ25GLE1BQU1VLE1BQU1VLFFBQVFwRCxLQUFLLENBQUNNLEdBQUc7SUFDN0IsTUFBTStDLElBQUksQ0FBQ1gsSUFBSUcsS0FBSyxDQUFDaEUsY0FBYyxJQUFJLEtBQU1pQixDQUFBQSxNQUFNRSxLQUFLLENBQUNNLEdBQUcsQ0FBQ3VDLEtBQUssQ0FBQ2hFLGNBQWMsSUFBSTtJQUNyRixJQUFJMUIsS0FBS21HLEdBQUcsQ0FBQ0QsS0FBSyxLQUFJO1FBQ3BCLE1BQU1FLE1BQU1GLElBQUksSUFBSSxxQkFBcUI7UUFDekNELFFBQVFwRCxLQUFLLENBQUNNLEdBQUcsQ0FBQzZDLEtBQUssR0FBRzlCLE9BQU9tQyxRQUFRLENBQUNELE9BQU9sQyxTQUFVQSxTQUFTa0M7SUFDdEUsT0FBTztRQUNMSCxRQUFRcEQsS0FBSyxDQUFDTSxHQUFHLENBQUM2QyxLQUFLLEdBQUc5QjtJQUM1QjtJQUNBLE9BQU8rQjtBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2FyLWdhbWVzLW12cC8uL3NyYy9zZXJ2ZXIvcHJvcGFnYXRlLnRzPzk4NmYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZzIGZyb20gXCJub2RlOmZzL3Byb21pc2VzXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwibm9kZTpwYXRoXCI7XG5pbXBvcnQgdHlwZSB7IFdvcmxkLCBTdGF0ZSwgRWRnZSB9IGZyb20gXCJAL3R5cGVzL2V2ZW50XCI7XG5cbnR5cGUgRGVsdGFzID0gUGFydGlhbDxTdGF0ZT47XG5cbmNvbnN0IExBTUJEQSA9IDAuMjU7XG5cbmZ1bmN0aW9uIGNsYW1wMDEoeDpudW1iZXIpeyByZXR1cm4gTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgeCkpOyB9XG5mdW5jdGlvbiBjbGFtcFN0YXRlKHM6IFBhcnRpYWw8U3RhdGU+KTogUGFydGlhbDxTdGF0ZT57XG4gIGNvbnN0IG91dDogUGFydGlhbDxTdGF0ZT4gPSB7IC4uLnMgfTtcbiAgY29uc3Qga2V5czogKGtleW9mIFN0YXRlKVtdID0gW1wid2FyX2VzY2FsYXRpb25cIixcIm1vYmlsaXphdGlvbl9sZXZlbFwiLFwicG9saXRpY2FsX3N0YWJpbGl0eVwiLFwiaW50ZWxfbGVha19yaXNrXCIsXCJsb2dpc3RpY3NfY2FwYWNpdHlcIixcImFsbGlhbmNlc19jb2hlc2lvblwiLFwicHVibGljX3N1cHBvcnRcIl07XG4gIGZvcihjb25zdCBrIG9mIGtleXMpe1xuICAgIGlmIChvdXRba10gIT09IHVuZGVmaW5lZCkgb3V0W2tdID0gY2xhbXAwMShvdXRba10gYXMgbnVtYmVyKTtcbiAgfVxuICBpZiAodHlwZW9mIG91dC5jYXN1YWx0aWVzX2V4cGVjdGVkID09PSBcIm51bWJlclwiKXtcbiAgICBvdXQuY2FzdWFsdGllc19leHBlY3RlZCA9IE1hdGgubWF4KDAsIE1hdGgucm91bmQob3V0LmNhc3VhbHRpZXNfZXhwZWN0ZWQpKTtcbiAgfVxuICByZXR1cm4gb3V0O1xufVxuXG5mdW5jdGlvbiBhZGRTdGF0ZXMoYTogUGFydGlhbDxTdGF0ZT4sIGI6IFBhcnRpYWw8U3RhdGU+KTogUGFydGlhbDxTdGF0ZT57XG4gIGNvbnN0IG91dDogUGFydGlhbDxTdGF0ZT4gPSB7IC4uLmEgfTtcbiAgZm9yIChjb25zdCBrIG9mIE9iamVjdC5rZXlzKGIpIGFzIChrZXlvZiBTdGF0ZSlbXSkge1xuICAgIGNvbnN0IHZhID0gKG91dFtrXSBhcyBudW1iZXJ8dW5kZWZpbmVkKSA/PyAwO1xuICAgIGNvbnN0IHZiID0gKGJba10gYXMgbnVtYmVyfHVuZGVmaW5lZCkgPz8gMDtcbiAgICBvdXRba10gPSAoayA9PT0gXCJjYXN1YWx0aWVzX2V4cGVjdGVkXCIpID8gTWF0aC5yb3VuZCgodmEgYXMgbnVtYmVyKSArICh2YiBhcyBudW1iZXIpKSA6ICh2YSBhcyBudW1iZXIpICsgKHZiIGFzIG51bWJlcik7XG4gIH1cbiAgcmV0dXJuIG91dDtcbn1cblxuZnVuY3Rpb24gdGltZURlY2F5KHllYXJzOm51bWJlcil7IHJldHVybiBNYXRoLmV4cCgtTEFNQkRBICogeWVhcnMpOyB9XG5cbmZ1bmN0aW9uIG1lY2hhbmlzbUZpbHRlcihtZWNoOiBFZGdlW1wibWVjaGFuaXNtXCJdLCBkZWx0YTogRGVsdGFzKTogRGVsdGFzIHtcbiAgY29uc3Qgc2NhbGU6IFJlY29yZDxzdHJpbmcsIFBhcnRpYWw8UmVjb3JkPGtleW9mIFN0YXRlLCBudW1iZXI+Pj4gPSB7XG4gICAgaW5mb3JtYXRpb25hbDogeyBwdWJsaWNfc3VwcG9ydDoxLjAsIHdhcl9lc2NhbGF0aW9uOjAuNCwgcG9saXRpY2FsX3N0YWJpbGl0eTowLjMgfSxcbiAgICBkaXBsb21hdGljOiAgICB7IGFsbGlhbmNlc19jb2hlc2lvbjoxLjAsIHBvbGl0aWNhbF9zdGFiaWxpdHk6MC42LCB3YXJfZXNjYWxhdGlvbjowLjIgfSxcbiAgICBtaWxpdGFyeTogICAgICB7IG1vYmlsaXphdGlvbl9sZXZlbDoxLjAsIGNhc3VhbHRpZXNfZXhwZWN0ZWQ6MS4wLCB3YXJfZXNjYWxhdGlvbjowLjcsIGxvZ2lzdGljc19jYXBhY2l0eTowLjMgfSxcbiAgICBlY29ub21pYzogICAgICB7IGxvZ2lzdGljc19jYXBhY2l0eToxLjAsIHB1YmxpY19zdXBwb3J0OjAuMywgcG9saXRpY2FsX3N0YWJpbGl0eTowLjIgfSxcbiAgICB0ZWNobm9sb2dpY2FsOiB7IGxvZ2lzdGljc19jYXBhY2l0eTowLjggfVxuICB9O1xuICBjb25zdCBvdXQ6IERlbHRhcyA9IHt9O1xuICBmb3IoY29uc3QgW2ssdl0gb2YgT2JqZWN0LmVudHJpZXMoZGVsdGEpIGFzIFtrZXlvZiBTdGF0ZSwgbnVtYmVyXVtdKSB7XG4gICAgY29uc3QgcyA9IChzY2FsZVttZWNoXSBhcyBhbnkpPy5ba10gPz8gMC4yO1xuICAgIG91dFtrXSA9IHYgKiBzO1xuICB9XG4gIHJldHVybiBvdXQ7XG59XG5cbmZ1bmN0aW9uIHllYXJzQmV0d2VlbihhOnN0cmluZywgYjpzdHJpbmcpe1xuICBjb25zdCBkYSA9IG5ldyBEYXRlKGEpLCBkYiA9IG5ldyBEYXRlKGIpO1xuICByZXR1cm4gTWF0aC5tYXgoMCwgKGRiLmdldFRpbWUoKSAtIGRhLmdldFRpbWUoKSkgLyAoMTAwMCo2MCo2MCoyNCozNjUpKTtcbn1cblxuZnVuY3Rpb24gdG9wb2xvZ2ljYWxPcmRlcih3b3JsZDogV29ybGQpOiBzdHJpbmdbXSB7XG4gIC8vIFNvcnQgYnkgZGF0ZSBhc2NlbmRpbmc7IGVkZ2VzIHZpb2xhdGluZyB0aW1lIGFyZSBpZ25vcmVkIGluIHByb3BhZ2F0aW9uIGFueXdheVxuICByZXR1cm4gT2JqZWN0LnZhbHVlcyh3b3JsZC5ub2Rlcykuc29ydCgoYSxiKT0+IGEuZGF0ZS5sb2NhbGVDb21wYXJlKGIuZGF0ZSkpLm1hcChuPT5uLmlkKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvYWRXb3JsZCgpOiBQcm9taXNlPFdvcmxkPntcbiAgY29uc3QgcCA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCBcImRhdGFcIiwgXCJ3d2kuanNvblwiKTtcbiAgY29uc3QgcmF3ID0gYXdhaXQgZnMucmVhZEZpbGUocCwgXCJ1dGYtOFwiKTtcbiAgY29uc3Qgd29ybGQgPSBKU09OLnBhcnNlKHJhdykgYXMgV29ybGQ7XG4gIHJldHVybiB3b3JsZDtcbn1cblxuZnVuY3Rpb24gYXBwbHlEZWx0YShub2RlU3RhdGU6IFBhcnRpYWw8U3RhdGU+LCBkZWx0YTogRGVsdGFzKTogUGFydGlhbDxTdGF0ZT57XG4gIGNvbnN0IG1lcmdlZCA9IGFkZFN0YXRlcyhub2RlU3RhdGUsIGRlbHRhKTtcbiAgcmV0dXJuIGNsYW1wU3RhdGUobWVyZ2VkKTtcbn1cblxuLy8gdmVyeSBzbWFsbCBoZXVyaXN0aWM6IG1hcCBoZWFkbGluZSB3b3JkLWNoYW5nZXMgdG8gZGVsdGFzXG5leHBvcnQgZnVuY3Rpb24gbWFwVGV4dFRvRGVsdGFzKG9yaWdpbmFsOiBzdHJpbmcsIGVkaXRlZDogc3RyaW5nKTogRGVsdGFzIHtcbiAgY29uc3QgdGV4dCA9IGVkaXRlZC50b0xvd2VyQ2FzZSgpO1xuICBjb25zdCBkOiBEZWx0YXMgPSB7IGNhc3VhbHRpZXNfZXhwZWN0ZWQ6IDAgfTtcbiAgZnVuY3Rpb24gaW5jKGtleToga2V5b2YgU3RhdGUsIGFtdDpudW1iZXIpeyAoZCBhcyBhbnkpW2tleV0gPSAoKGQgYXMgYW55KVtrZXldID8/IDApICsgYW10OyB9XG4gIC8vIGhldXJpc3RpYyBrZXl3b3Jkc1xuICBjb25zdCBsb3dlcnMgPSBbXG4gICAgW1wiYXNzYXNzaW5hdGVkXCIsXCJhc3Nhc3NpblwiLFwia2lsbFwiLFwibWFzc2FjcmVcIixcInNsYXVnaHRlclwiLFwib2ZmZW5zaXZlXCIsXCJpbnZhc2lvblwiLFwiYXR0YWNrXCIsXCJ1LWJvYXRcIixcImdhc1wiLFwibW9iaWxpemVcIixcImRlY2xhcmUgd2FyXCJdLFxuICAgIFtcImNlYXNlZmlyZVwiLFwiYXJtaXN0aWNlXCIsXCJ0cnVjZVwiLFwicGVhY2VcIixcInN1cnZpdmVzXCIsXCJmb2lsZWRcIixcImZhaWxzXCIsXCJ3aXRoZHJhd1wiLFwicmV0cmVhdFwiLFwibmV1dHJhbFwiLFwidGFsa3NcIixcIm5lZ290aWF0XCJdXG4gIF07XG4gIGZvcihjb25zdCBrIG9mIFtcImFzc2Fzc2luYXRlZFwiLFwiYXNzYXNzaW5cIixcImtpbGxcIixcIm1hc3NhY3JlXCIsXCJvZmZlbnNpdmVcIixcImludmFzaW9uXCIsXCJhdHRhY2tcIixcInUtYm9hdFwiLFwiZ2FzXCIsXCJtb2JpbGl6ZVwiLFwiZGVjbGFyZSB3YXJcIl0pe1xuICAgIGlmICh0ZXh0LmluY2x1ZGVzKGspKXtcbiAgICAgIGluYyhcIndhcl9lc2NhbGF0aW9uXCIsIDAuMjUpO1xuICAgICAgaW5jKFwibW9iaWxpemF0aW9uX2xldmVsXCIsIDAuMik7XG4gICAgICAoZC5jYXN1YWx0aWVzX2V4cGVjdGVkIGFzIG51bWJlcikgKz0gMTAwMDA7XG4gICAgfVxuICB9XG4gIGZvcihjb25zdCBrIG9mIFtcImNlYXNlZmlyZVwiLFwiYXJtaXN0aWNlXCIsXCJ0cnVjZVwiLFwicGVhY2VcIixcInN1cnZpdmVzXCIsXCJmb2lsZWRcIixcImZhaWxzXCIsXCJ3aXRoZHJhd1wiLFwicmV0cmVhdFwiLFwibmV1dHJhbFwiLFwidGFsa3NcIixcIm5lZ290aWF0XCJdKXtcbiAgICBpZiAodGV4dC5pbmNsdWRlcyhrKSl7XG4gICAgICBpbmMoXCJ3YXJfZXNjYWxhdGlvblwiLCAtMC4zNSk7XG4gICAgICBpbmMoXCJwb2xpdGljYWxfc3RhYmlsaXR5XCIsIDAuMik7XG4gICAgICAoZC5jYXN1YWx0aWVzX2V4cGVjdGVkIGFzIG51bWJlcikgLT0gODAwMDtcbiAgICB9XG4gIH1cbiAgaWYgKHRleHQuaW5jbHVkZXMoXCJ0ZWxlZ3JhbVwiKSB8fCB0ZXh0LmluY2x1ZGVzKFwiaW50ZXJjZXB0XCIpIHx8IHRleHQuaW5jbHVkZXMoXCJwcm9wYWdhbmRhXCIpKXtcbiAgICBpbmMoXCJpbnRlbF9sZWFrX3Jpc2tcIiwgMC4zKTtcbiAgICBpbmMoXCJwdWJsaWNfc3VwcG9ydFwiLCAwLjE1KTtcbiAgfVxuICBpZiAodGV4dC5pbmNsdWRlcyhcImJsb2NrYWRlXCIpIHx8IHRleHQuaW5jbHVkZXMoXCJzdXBwbHlcIikpe1xuICAgIGluYyhcImxvZ2lzdGljc19jYXBhY2l0eVwiLCAtMC4yKTtcbiAgfVxuICBpZiAodGV4dC5pbmNsdWRlcyhcImFsbGlhbmNlXCIpIHx8IHRleHQuaW5jbHVkZXMoXCJqb2luc1wiKSl7XG4gICAgaW5jKFwiYWxsaWFuY2VzX2NvaGVzaW9uXCIsIDAuMik7XG4gIH1cbiAgLy8gY2xhbXAgY2FzdWFsdGllcyBlZmZlY3RcbiAgZC5jYXN1YWx0aWVzX2V4cGVjdGVkID0gTWF0aC5tYXgoLTUwMDAwLCBNYXRoLm1pbig1MDAwMCwgZC5jYXN1YWx0aWVzX2V4cGVjdGVkIHx8IDApKTtcbiAgcmV0dXJuIGQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcm9wYWdhdGUod29ybGQ6IFdvcmxkLCBzb3VyY2VJZDogc3RyaW5nLCBkZWx0YXM6IERlbHRhcyk6IFdvcmxkIHtcbiAgY29uc3Qgb3V0OiBXb3JsZCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkod29ybGQpKTsgLy8gZGVlcCBjbG9uZVxuICBjb25zdCBhY2M6IFJlY29yZDxzdHJpbmcsIERlbHRhcz4gPSB7IFtzb3VyY2VJZF06IGRlbHRhcyB9O1xuXG4gIGNvbnN0IG9yZGVyID0gdG9wb2xvZ2ljYWxPcmRlcihvdXQpO1xuICBjb25zdCBpZHg6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fTtcbiAgb3JkZXIuZm9yRWFjaCgoaWQsaSk9PnsgaWR4W2lkXT1pOyB9KTtcblxuICAvLyBFbnN1cmUgZWRnZXMgcmVzcGVjdCB0aW1lIGRpcmVjdGlvbiBpbiBlZmZlY3RcbiAgY29uc3QgZWRnZXMgPSBvdXQuZWRnZXMuZmlsdGVyKGUgPT4gaWR4W2Uuc3JjXSA8PSBpZHhbZS5kc3RdKTtcblxuICBmb3IgKGNvbnN0IGlkIG9mIG9yZGVyKSB7XG4gICAgY29uc3QgbG9jYWxEZWx0YSA9IGFjY1tpZF07XG4gICAgaWYgKGxvY2FsRGVsdGEpe1xuICAgICAgLy8gYXBwbHkgdG8gbm9kZVxuICAgICAgb3V0Lm5vZGVzW2lkXS5zdGF0ZSA9IGFwcGx5RGVsdGEob3V0Lm5vZGVzW2lkXS5zdGF0ZSB8fCB7fSwgbG9jYWxEZWx0YSk7XG4gICAgICAvLyBwdXNoIHRvIG5laWdoYm9yc1xuICAgICAgY29uc3Qgb3V0cyA9IGVkZ2VzLmZpbHRlcihlID0+IGUuc3JjID09PSBpZCk7XG4gICAgICBmb3IgKGNvbnN0IGUgb2Ygb3V0cyl7XG4gICAgICAgIGNvbnN0IHllYXJzID0geWVhcnNCZXR3ZWVuKG91dC5ub2Rlc1tlLnNyY10uZGF0ZSwgb3V0Lm5vZGVzW2UuZHN0XS5kYXRlKTtcbiAgICAgICAgY29uc3QgYmFzZSA9IG1lY2hhbmlzbUZpbHRlcihlLm1lY2hhbmlzbSwgbG9jYWxEZWx0YSk7XG4gICAgICAgIGZvciAoY29uc3QgW2ssdl0gb2YgT2JqZWN0LmVudHJpZXMoYmFzZSkgYXMgW2tleW9mIFN0YXRlLCBudW1iZXJdW10pe1xuICAgICAgICAgIGNvbnN0IGQgPSB2ICogZS53ZWlnaHQgKiB0aW1lRGVjYXkoeWVhcnMpO1xuICAgICAgICAgIChhY2NbZS5kc3RdIGFzIGFueSkgPSBhY2NbZS5kc3RdIHx8IHt9O1xuICAgICAgICAgIChhY2NbZS5kc3RdIGFzIGFueSlba10gPSAoKGFjY1tlLmRzdF0gYXMgYW55KVtrXSA/PyAwKSArIGQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIG91dDtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJ1bkludGVydmVudGlvbih3b3JsZDogV29ybGQsIGlkOiBzdHJpbmcsIGVkaXRlZDogc3RyaW5nKTogUHJvbWlzZTxXb3JsZD4ge1xuICBjb25zdCBvcmlnaW5hbCA9IHdvcmxkLm5vZGVzW2lkXT8udGl0bGUgfHwgXCJcIjtcbiAgY29uc3QgZGVsdGFzID0gbWFwVGV4dFRvRGVsdGFzKG9yaWdpbmFsLCBlZGl0ZWQpO1xuICBjb25zdCB1cGRhdGVkID0gcHJvcGFnYXRlKHdvcmxkLCBpZCwgZGVsdGFzKTtcblxuICAvLyB2ZXJ5IGxpZ2h0IGhlYWRsaW5lIHJld3JpdGU6IGFwcGVuZCB0cmVuZCBoaW50IGlmIGxhcmdlIHNoaWZ0IGF0IHRoZSBzb3VyY2Ugbm9kZVxuICBjb25zdCBzcmMgPSB1cGRhdGVkLm5vZGVzW2lkXTtcbiAgY29uc3QgdyA9IChzcmMuc3RhdGUud2FyX2VzY2FsYXRpb24gPz8gMCkgLSAod29ybGQubm9kZXNbaWRdLnN0YXRlLndhcl9lc2NhbGF0aW9uID8/IDApO1xuICBpZiAoTWF0aC5hYnModykgPiAwLjIpe1xuICAgIGNvbnN0IHRhZyA9IHcgPCAwID8gXCIgKHRlbnNpb25zIGVhc2UpXCIgOiBcIiAodGVuc2lvbnMgcmlzZSlcIjtcbiAgICB1cGRhdGVkLm5vZGVzW2lkXS50aXRsZSA9IGVkaXRlZC5lbmRzV2l0aCh0YWcpID8gZWRpdGVkIDogKGVkaXRlZCArIHRhZyk7XG4gIH0gZWxzZSB7XG4gICAgdXBkYXRlZC5ub2Rlc1tpZF0udGl0bGUgPSBlZGl0ZWQ7XG4gIH1cbiAgcmV0dXJuIHVwZGF0ZWQ7XG59Il0sIm5hbWVzIjpbImZzIiwicGF0aCIsIkxBTUJEQSIsImNsYW1wMDEiLCJ4IiwiTWF0aCIsIm1heCIsIm1pbiIsImNsYW1wU3RhdGUiLCJzIiwib3V0Iiwia2V5cyIsImsiLCJ1bmRlZmluZWQiLCJjYXN1YWx0aWVzX2V4cGVjdGVkIiwicm91bmQiLCJhZGRTdGF0ZXMiLCJhIiwiYiIsIk9iamVjdCIsInZhIiwidmIiLCJ0aW1lRGVjYXkiLCJ5ZWFycyIsImV4cCIsIm1lY2hhbmlzbUZpbHRlciIsIm1lY2giLCJkZWx0YSIsInNjYWxlIiwiaW5mb3JtYXRpb25hbCIsInB1YmxpY19zdXBwb3J0Iiwid2FyX2VzY2FsYXRpb24iLCJwb2xpdGljYWxfc3RhYmlsaXR5IiwiZGlwbG9tYXRpYyIsImFsbGlhbmNlc19jb2hlc2lvbiIsIm1pbGl0YXJ5IiwibW9iaWxpemF0aW9uX2xldmVsIiwibG9naXN0aWNzX2NhcGFjaXR5IiwiZWNvbm9taWMiLCJ0ZWNobm9sb2dpY2FsIiwidiIsImVudHJpZXMiLCJ5ZWFyc0JldHdlZW4iLCJkYSIsIkRhdGUiLCJkYiIsImdldFRpbWUiLCJ0b3BvbG9naWNhbE9yZGVyIiwid29ybGQiLCJ2YWx1ZXMiLCJub2RlcyIsInNvcnQiLCJkYXRlIiwibG9jYWxlQ29tcGFyZSIsIm1hcCIsIm4iLCJpZCIsImxvYWRXb3JsZCIsInAiLCJqb2luIiwicHJvY2VzcyIsImN3ZCIsInJhdyIsInJlYWRGaWxlIiwiSlNPTiIsInBhcnNlIiwiYXBwbHlEZWx0YSIsIm5vZGVTdGF0ZSIsIm1lcmdlZCIsIm1hcFRleHRUb0RlbHRhcyIsIm9yaWdpbmFsIiwiZWRpdGVkIiwidGV4dCIsInRvTG93ZXJDYXNlIiwiZCIsImluYyIsImtleSIsImFtdCIsImxvd2VycyIsImluY2x1ZGVzIiwicHJvcGFnYXRlIiwic291cmNlSWQiLCJkZWx0YXMiLCJzdHJpbmdpZnkiLCJhY2MiLCJvcmRlciIsImlkeCIsImZvckVhY2giLCJpIiwiZWRnZXMiLCJmaWx0ZXIiLCJlIiwic3JjIiwiZHN0IiwibG9jYWxEZWx0YSIsInN0YXRlIiwib3V0cyIsImJhc2UiLCJtZWNoYW5pc20iLCJ3ZWlnaHQiLCJydW5JbnRlcnZlbnRpb24iLCJ0aXRsZSIsInVwZGF0ZWQiLCJ3IiwiYWJzIiwidGFnIiwiZW5kc1dpdGgiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/server/propagate.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fintervene%2Froute&page=%2Fapi%2Fintervene%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fintervene%2Froute.ts&appDir=%2FUsers%2Fmadeleinesong%2Fhistorygame%2Fwar-games-mvp%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmadeleinesong%2Fhistorygame%2Fwar-games-mvp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();